---
title: "CPI Data"
---

```{r, fig.height = 6, fig.width = 10, warning=FALSE, message=FALSE, echo=FALSE}
library(tidyverse) # Core Data Analysis Tools
library(tidyquant) # Quantitative Analysis
library(plotly) # interactive visualizations



## Symbols to Extract

g <- c( 
  
  "CPIAUCNS"# All Items U.S. City Average
   
   )  %>%
  
  tq_get(get  = "economic.data", from = "2020-05-01") %>%
  
  ## Data Cleaning and Manipulation
  
  rename(Name = symbol, Date = date, Index = price) %>%
  
  
  mutate(
    
    PercentChange =((Index/lag(Index,12)-1)*100) %>% round(1),
    
    Name = case_when(
        Name == "CPIAUCNS" ~ "All Items"
        ),
    Name = as_factor(Name),
    
    ) %>%
    
  na.omit %>%
  
  
  
  ## Data Visualization
  ggplot(aes(x=Date, y=PercentChange, color=Name)) +
  geom_bar(stat= "identity", fill = "#2780e3", color = "#2780e3" ) + 
  
  # Formatting
    labs(
        title = "Consumer Price Index for All Urban Consumers: All Items",
        subtitle = "Not Seasonally Adjusted",
        y = "Year-Over-Year Percentage Change")  +
    
    theme_tq() +
    theme(
        legend.position = "right",
        axis.title.x = element_blank(),
        plot.title = element_text(face = "bold"),
        plot.caption = element_text(face = "italic"),
        axis.text.x = element_text(angle=40, hjust=1),
        plot.margin = margin(1,1,1.5,1.2, "cm")) +
        scale_x_date(date_breaks = "1 month", date_labels = "%b %y") +
        scale_y_continuous(breaks = seq(0,10,1))

## plot 
plotly::ggplotly(g, tooltip = c("Date", "PercentChange"))  %>% 
  layout(annotations = 
 list(x = 1, y = -0.1, 
      text = str_glue("Not Seasonally Adjusted, Source: U.S. Bureau of Labor Statistics (fred.stlouisfed.org)"), 
      showarrow = F, xref='paper', yref='paper', 
      xanchor='bottom', yanchor='bottom', xshift=0, yshift=-35,
      font=list(size=9, color="black")) 
 )
```


 - [Consumer Price Index for All Urban Consumers: All Items in U.S. City Average](https://fred.stlouisfed.org/series/CPIAUCNS)
 


<br/> 
 
<br/>

```{r, fig.height = 6, fig.width = 10, warning=FALSE, message=FALSE, echo=FALSE}
library(tidyverse) # Core Data Analysis Tools
library(tidyquant) # Quantitative Analysis
library(plotly) # interactive visualizations



## Symbols to Extract

g <- c( 
  
  "CPIHOSNS",   # Housing	
  "CPIMEDNS",   # Medical Care		   
  "CPIFABNS",   # Food and Beverages	
  "CPIAPPNS",   # Apparel
  "CPIEDUNS",   # Education and Communication
  "CPIOGSNS",   # Other Goods and Services		
  "CPIRECNS",   # Recreation	
  "CPITRNNS"    # Transportation 
   
   )  %>%
  
  tq_get(get  = "economic.data", from = "2018-05-01") %>%
  
  ## Data Cleaning and Manipulation
  
  rename(IndexName = symbol, Date = date, Index = price) %>%
  group_by(IndexName) %>%
  mutate(
    
    PercentChange =((Index/lag(Index,12)-1)*100) %>% round(1),
    IndexName = case_when(
        IndexName == "CPIHOSNS" ~  "Housing",
        IndexName == "CPIMEDNS" ~  "Medical Care",
        IndexName == "CPIFABNS" ~  "Food and Beverages",
        IndexName == "CPIAPPNS" ~  "Apparel",
        IndexName == "CPIEDUNS" ~  "Education and Communication",
        IndexName == "CPIOGSNS" ~  "Other Goods and Services",
        IndexName == "CPIRECNS" ~  "Recreation",
        IndexName == "CPITRNNS" ~  "Transportation"
        ),
    IndexName = as_factor(IndexName)) %>% na.omit %>% ungroup(IndexName) %>% 
  ## Data Visualization
  ggplot(aes(x=Date, y=PercentChange, color=IndexName)) +
  geom_line() + 
  
  # Formatting
    labs(
        title = "Consumer Price Index for All Urban Consumers",
        x = "Date",
        y = "Year-Over-Year Percentage Change") +
    theme_tq() +
    theme(
        legend.position = "right",
        axis.title.x = element_blank(),
        plot.title = element_text(face = "bold"),
        plot.caption = element_text(face = "italic"),
        axis.text.x = element_text(angle=60, hjust=1),
        plot.margin = margin(1,1,1.5,1.2, "cm")) + 
        scale_x_date(date_breaks = "3 month", date_labels = "%b %y") +
        scale_y_continuous(breaks = seq(-15,25,5))

## plot 
plotly::ggplotly(g, tooltip = c("Date", "PercentChange", "IndexName"))  %>% 
  layout(annotations = 
 list(x = 1, y = -0.1, 
      text = str_glue("Not Seasonally Adjusted
                      Source: U.S. Bureau of Labor Statistics
                      fred.stlouisfed.org"), 
      showarrow = F, xref='paper', yref='paper', 
      xanchor='right', yanchor='bottom', xshift=220, yshift=-20,
      font=list(size=10, color="black")) 
 )
```


 - [Consumer Price Index for All Urban Consumers: Housing in U.S. City Average](https://fred.stlouisfed.org/series/CPIHOSNS)
 - [Consumer Price Index for All Urban Consumers: Medical Care in U.S. City Average](https://fred.stlouisfed.org/series/CPIMEDNS)
 - [Consumer Price Index for All Urban Consumers: Food and Beverages in U.S. City Average](https://fred.stlouisfed.org/series/CPIFABNS)
 - [Consumer Price Index for All Urban Consumers: Apparel in U.S. City Average](https://fred.stlouisfed.org/series/CPIAPPNS)
 - [Consumer Price Index for All Urban Consumers: Education and Communication in U.S. City Average](https://fred.stlouisfed.org/series/CPIEDUNS)
 - [Consumer Price Index for All Urban Consumers: Other Goods and Services in U.S. City Average](https://fred.stlouisfed.org/series/CPIOGSNS)
 - [Consumer Price Index for All Urban Consumers: Recreation in U.S. City Average](https://fred.stlouisfed.org/series/CPIRECNS)
 -	[Consumer Price Index for All Urban Consumers: Transportation in U.S. City Average](https://fred.stlouisfed.org/series/CPITRNNS)
 

<br/> 
 

<br/>
 
 
*Data last refreshed on `r Sys.Date()`.*

*Document Built with R Version: `r getRversion()`*

<br/>

 

 